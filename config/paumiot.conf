# PaumIoT Middleware Configuration
# Main configuration file for the IoT protocol middleware

[general]
# System identification
system_name = "PaumIoT"
version = "1.0.0"
node_id = "paumiot_node_01"

# Logging configuration
log_level = "INFO"  # DEBUG, INFO, WARN, ERROR
log_file = "/var/log/paumiot/system.log"
log_rotation = true
max_log_size = "10MB"
max_log_files = 5

[network]
# Network interface configuration
bind_address = "0.0.0.0"
max_connections = 1000
connection_timeout = 30
keepalive_interval = 60

[smp]
# State Management Plane Configuration
enabled = true
heartbeat_interval = 10
health_check_interval = 5
metrics_collection_interval = 1
state_persistence = true
state_file = "/var/lib/paumiot/state.db"

[pdl]
# Protocol Demultiplexing Layer Configuration
enabled = true
max_packet_size = 65536
buffer_size = 1048576  # 1MB
dpi_enabled = true
load_balancing = "round_robin"  # round_robin, least_connections, weighted

# Supported protocols and ports
[pdl.mqtt]
enabled = true
port = 1883
secure_port = 8883
max_clients = 500

[pdl.coap]
enabled = true
port = 5683
secure_port = 5684
max_clients = 500

[pal]
# Protocol Adaptation Layer Configuration
enabled = true
message_queue_size = 10000
adapter_timeout = 30

[pal.mqtt]
# MQTT Adapter Configuration
version = "5.0"  # 3.1.1 or 5.0
qos_support = [0, 1, 2]
session_persistence = true
max_inflight = 20
retry_interval = 5
max_retries = 3

[pal.coap]
# CoAP Adapter Configuration
version = "RFC7252"
confirmable_timeout = 2
max_retransmit = 4
ack_random_factor = 1.5
blockwise_enabled = true
observe_enabled = true

[bll]
# Business Logic Layer Configuration
enabled = true
request_timeout = 30
max_concurrent_requests = 1000
cache_enabled = true
cache_ttl = 300  # 5 minutes
aggregation_enabled = true
aggregation_window = 60  # 1 minute

[dal]
# Data Acquisition Layer Configuration
enabled = true
sampling_interval = 1
data_validation = true
buffer_size = 10000
compression_enabled = true

# Database configuration
[dal.database]
type = "timeseries"  # timeseries, relational, nosql
host = "localhost"
port = 8086
name = "paumiot_db"
username = "paumiot"
password = "changeme"
retention_policy = "30d"

[security]
# Security configuration
tls_enabled = false
dtls_enabled = false
cert_file = "/etc/paumiot/certs/server.crt"
key_file = "/etc/paumiot/certs/server.key"
ca_file = "/etc/paumiot/certs/ca.crt"

# Authentication
auth_enabled = false
auth_method = "certificate"  # certificate, psk, username_password
auth_timeout = 30

[performance]
# Performance tuning
worker_threads = 4
io_threads = 2
memory_limit = "512MB"
cpu_affinity = []

# Optimization flags
zero_copy = true
batch_processing = true
compression = true

[monitoring]
# Monitoring and metrics
metrics_enabled = true
metrics_port = 9090
prometheus_enabled = false
health_endpoint = "/health"
metrics_endpoint = "/metrics"

[development]
# Development and debugging
debug_mode = false
profiling_enabled = false
memory_debugging = false
protocol_tracing = false